{"version":3,"file":"expenders.min.js","sources":["../src/expenders.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * module expenders\n *\n * @module     enrol_wallet/expenders\n * @copyright  2024 Mohammad Farouk <phun.for.physics@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nexport const init = (uniqid) => {\n\n    // Manual refund policy.\n    let policyContainer = $('[data-wallet-purpose=\"policy-container\"]');\n    let policyLink = policyContainer.find('[data-wallet-action=\"toggle-policy\"]');\n\n    policyLink.off(\"click\");\n    policyLink.on(\"click\", function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n\n        let policy = $(this).parent().siblings('[data-wallet-role=\"policy\"]');\n\n        policy.toggle();\n    });\n\n    // More balance details.\n    let moreBalanceDetails = $('#more-details-' + uniqid);\n    let details = $('#balance-details-' + uniqid);\n\n    moreBalanceDetails.off(\"click\");\n    moreBalanceDetails.on(\"click\", function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        details.toggle();\n    });\n\n    // Show top up options after confirm the agreement.\n    let walletPolicyAgreed = $('#wallet_topup_policy_confirm_' + uniqid);\n    let topUpBox = $('#enrol_wallet_topup_box_' + uniqid);\n    if (walletPolicyAgreed && topUpBox) {\n        // As the user may click the check box while the page not loaded yet.\n        setTimeout(function() {\n            showHideTopUp();\n        });\n\n        walletPolicyAgreed.off('change');\n        walletPolicyAgreed.on('change', function() {\n            showHideTopUp();\n        });\n\n        const showHideTopUp = () => {\n            if (walletPolicyAgreed.prop('checked')) {\n                topUpBox.show();\n            } else {\n                topUpBox.hide();\n            }\n        };\n    }\n};"],"names":["uniqid","policyLink","find","off","on","e","preventDefault","stopPropagation","stopImmediatePropagation","this","parent","siblings","toggle","moreBalanceDetails","details","walletPolicyAgreed","topUpBox","setTimeout","showHideTopUp","prop","show","hide"],"mappings":";;;;;;;wJAyBqBA,aAIbC,YADkB,mBAAE,4CACSC,KAAK,wCAEtCD,WAAWE,IAAI,SACfF,WAAWG,GAAG,SAAS,SAASC,GAC5BA,EAAEC,iBACFD,EAAEE,kBACFF,EAAEG,4BAEW,mBAAEC,MAAMC,SAASC,SAAS,+BAEhCC,gBAIPC,oBAAqB,mBAAE,iBAAmBb,QAC1Cc,SAAU,mBAAE,oBAAsBd,QAEtCa,mBAAmBV,IAAI,SACvBU,mBAAmBT,GAAG,SAAS,SAASC,GACpCA,EAAEC,iBACFD,EAAEE,kBACFF,EAAEG,2BACFM,QAAQF,gBAIRG,oBAAqB,mBAAE,gCAAkCf,QACzDgB,UAAW,mBAAE,2BAA6BhB,WAC1Ce,oBAAsBC,SAAU,CAEhCC,YAAW,WACPC,mBAGJH,mBAAmBZ,IAAI,UACvBY,mBAAmBX,GAAG,UAAU,WAC5Bc,yBAGEA,cAAgB,KACdH,mBAAmBI,KAAK,WACxBH,SAASI,OAETJ,SAASK"}